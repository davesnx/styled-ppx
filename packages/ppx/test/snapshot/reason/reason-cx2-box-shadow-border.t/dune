(library
 (name box_shadow_border)
 (modules input)
 (modes melange)
 (libraries styled-ppx.melange reason-react melange.belt melange.dom)
 (preprocess
  (pps styled-ppx reason-react-ppx melange.ppx)))

(rule
 (target styles.css)
 (mode promote)
 (deps
  (glob_files *.pp.ml))
 (action
  (with-stdout-to
   %{target}
   (run styled-ppx.generate %{deps}))))

(melange.emit
 (alias box-shadow-border)
 (target box-shadow-border)
 (modules)
 (libraries box_shadow_border styled-ppx.melange reason-react melange.belt melange.dom)
 (preprocess
  (pps styled-ppx reason-react-ppx melange.ppx)))

